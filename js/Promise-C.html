<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./Promise-C.js"></script>
  </head>
  <body>
    <script>
      let a = 1;
      const aa = function () {
        // let a = 2;
        console.log(a);
      };
      aa();

      function bi_search(arr, target) {
        let left = 0,
          right = arr.length - 1;
        while (left <= right) {
          let mid = Math.floor((left + right) / 2);
          if (target === arr[mid]) {
            return mid;
          } else if (target > arr[mid]) {
            left = mid + 1;
          } else {
            right = mid - 1;
          }
        }
        return -1;
      }

      function bubbleSort(arr) {
        const n = arr.length - 1;
        for (let i = 0; i < n; i++) {
          for (let j = 0; j < n - i; j++) {
            if (arr[j] > arr[j + 1]) {
              [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
            }
          }
        }
      }

      const quickSort = (arr) => {
        if (arr.length <= 1) return arr;
        let pivot = arr[Math.floor(arr.length / 2)];
        let left = [],
          right = [];
        for (let i = 0; i < arr.length; i++) {
          if (arr[i] < pivot) {
            left.push(arr[i]);
          } else {
            right.push(arr[i]);
          }
        }
        return quickSort(left).concat([pivot], quickSort(right));
      };

      const getData = (url) => {
        return new Promise((res, rej) => {
          setTimeout(() => {
            let ran = Math.random();
            let result = ran > 0.5;
            if (result) {
              res(ran);
            } else {
              rej(ran);
            }
          }, 1000);
        });
      };
      let p1 = getData("https://api.xxx.com/data1");
      let p2 = getData("https://api.xxx.com/data2");
      let p3 = getData("https://api.xxx.com/data3");

      Promise.all([p1, p2])
        .then((result) => {
          console.log(result);
        })
        .catch((reason) => {
          console.log(reason);
        });

      // let p1 = new Promise((resolve,reject)=>{
      //     resolve('OK')
      // })
      // let p2 = new Promise((resolve,reject)=>{
      //     resolve('AAA')
      // })
      // let p3 = new Promise((resolve,reject)=>{
      //     resolve('BBB')
      // })

      // let all = Promise.all([p1,p2,p3])

      // console.log(all);

      // let p = new Promise((resolve, reject)=>{
      //     setTimeout(()=>{
      //         resolve('Good')
      //         reject('Error')
      //         // throw 'errString'
      //     },2000)

      // })

      // p.then().then(value => {
      //     console.log(222)
      // }).then(value => {
      //     console.log(333)
      // }).catch(reason=>{
      //     console.warn(reason);
      // })

      // let ca = p.catch(reason=>{
      //     console.warn(reason);
      // })

      // let res = p.then(value => {
      //     console.log(value)
      //     // throw 'errorthrow'
      //     // return new Promise((res, rej)=>{
      //     //     rej('return fail')
      //     // })
      // }, err=>{
      //     // throw 'errThr'
      //     console.warn(err)
      // })
      // // p.then(res => {
      // //     console.log(res)
      // // }, err=>{
      // //     console.warn(err)
      // // })
      // console.log(res)
    </script>
  </body>
</html>
